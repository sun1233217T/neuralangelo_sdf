EXPERIMENT=dtu
GROUP=test
NAME=test2
CONFIG=projects/neuralangelo/configs/${EXPERIMENT}.yaml
GPUS=1  # use >1 for multi-GPU training!
CUDA_VISIBLE_DEVICES=0 torchrun --master_port=29503 --nproc_per_node=${GPUS} train.py \
    --logdir=logs/${GROUP}/${NAME} \
    --config=${CONFIG} \
    --show_pbar \
	--wandb  --wandb_name sdf_train_test\
	--resume

python3 projects/neuralangelo/scripts/convert_data_to_json.py --data_dir /home/haochen/data/DTU/scan24 --scene_type object


CHECKPOINT=logs/${GROUP}/${NAME}/xxx.pt
OUTPUT_MESH=logs/${GROUP}/${NAME}/test.ply
CONFIG=logs/${GROUP}/${NAME}/config.yaml
RESOLUTION=2048
BLOCK_RES=128
GPUS=1  # use >1 for multi-GPU mesh extraction
torchrun --nproc_per_node=${GPUS} projects/neuralangelo/scripts/extract_mesh.py \
    --config=${CONFIG} \
    --checkpoint=${CHECKPOINT} \
    --output_file=${OUTPUT_MESH} \
    --resolution=${RESOLUTION} \
    --block_res=${BLOCK_RES}

EXPERIMENT=dtu
GROUP=test
NAME=sdf_GS_gengeration_test2
CONFIG=projects/sdf_GS_gengeration/configs/${EXPERIMENT}-win.yaml
python train.py --single_gpu \
    --logdir=logs/${GROUP}/${NAME} \
    --config=${CONFIG} \
    --show_pbar \
	--wandb  --wandb_name test\
	--resume --checkpoint logs/test/base/epoch_00408_iteration_000020000_checkpoint.pt --sdf_bootstrap

EXPERIMENT=mip
GROUP=test
NAME=sdf_train_speed2_garden
CONFIG=projects/sdf_angelo/configs/${EXPERIMENT}-win.yaml
python train.py --single_gpu \
    --logdir=logs/${GROUP}/${NAME} \
    --config=${CONFIG} \
    --show_pbar \
	--wandb  --wandb_name test\
	--resume 

CHECKPOINT=logs/${GROUP}/${NAME}/xxx.pt
OUTPUT_MESH=meshout/test1.ply
CONFIG=logs/${GROUP}/${NAME}/config.yaml
RESOLUTION=2048
BLOCK_RES=128
GPUS=1  # use >1 for multi-GPU mesh extraction
python projects/sdf_angelo/scripts/extract_mesh.py --single_gpu \
    --config=${CONFIG} \
    --checkpoint=${CHECKPOINT} \
    --output_file=${OUTPUT_MESH} \
    --resolution=${RESOLUTION} \
    --block_res=${BLOCK_RES} --textured


python projects/sdf_angelo/scripts/extract_mesh.py --single_gpu   --config=${CONFIG}   --checkpoint=${CHECKPOINT}   --input_mesh=cutted.obj   --input_mesh_space=world   --output_file=mesh_uv.obj   --uv_textured   --uv_raster=gpu   --texture_size=4096 --uv_target_faces=50000 --uv_remesh --uv_remesh_position=after

python projects/sdf_angelo/uv_viewer/server.py   --config ${CONFIG}   --checkpoint ${CHECKPOINT}   --mesh mesh_uv.obj   --single_gpu   --host 0.0.0.0   --port 8080   --texture_size 1024   --update_fps 8 --batch_size 1310720